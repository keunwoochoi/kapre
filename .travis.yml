language: python

addons:
  apt:
    packages:
    - x11-utils
    - libxkbcommon-x11-0
services: xvfb
dist: xenial

python:
    - "3.6"
    - "3.7"

install:
    - pip install --pre -e .
    - pip install black

script:
    - pytest
    - black --line-length 100 --diff --check --skip-string-normalization --target-version=py37 kapre
    - black --line-length 100 --diff --check --skip-string-normalization --target-version=py37 tests

after_success:
    - coveralls
    - pip uninstall -y kapre

after_failure:
    - pip uninstall -y kapre
